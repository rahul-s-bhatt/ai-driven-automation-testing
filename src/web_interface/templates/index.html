<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Testing Framework</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
        .tutorial-section {
            display: none;
        }
        .tutorial-section.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🤖 Website Testing Framework</h1>

        <!-- Tutorial Navigation -->
        <div class="tutorial-nav">
            <button class="nav-item active" onclick="showSection('getting-started', this)">Getting Started</button>
            <button class="nav-item" onclick="showSection('analyze', this)">Analyze Website</button>
            <button class="nav-item" onclick="showSection('scraping', this)">Scraping Analysis</button>
            <button class="nav-item" onclick="showSection('dynamic-content', this)">Dynamic Content</button>
            <button class="nav-item" onclick="showSection('troubleshooting', this)">Help</button>
            <button class="nav-item" onclick="showSection('test-runner', this)">Test Runner</button>
        </div>

        <!-- Getting Started Section -->
        <div id="getting-started" class="tutorial-section active">
            <h2>👋 Welcome!</h2>
            <p>Get started with our website testing framework in 3 simple steps:</p>
            
            <div class="steps">
                <div class="step">
                    <h3>1. Choose a Test Scenario</h3>
                    <p>Select from our pre-built scenarios:</p>
                    <div class="example-scenarios">
                        <button onclick="loadExample('simple')">Simple Search Test</button>
                        <button onclick="loadExample('infinite-scroll')">Infinite Scroll Test</button>
                        <button onclick="loadExample('dynamic')">Dynamic Content Test</button>
                    </div>
                </div>
                
                <div class="step">
                    <h3>2. Analyze Your Website</h3>
                    <p>Let our tool analyze your website's structure and suggest test scenarios:</p>
                    <button onclick="showSection('analyze', document.querySelector('.nav-item[onclick*=\'analyze\']'))">
                        Start Analysis
                    </button>
                </div>
                
                <div class="step">
                    <h3>3. Run Tests</h3>
                    <p>Execute your tests and view detailed results:</p>
                    <button onclick="showSection('test-runner', document.querySelector('.nav-item[onclick*=\'test-runner\']'))">
                        Open Test Runner
                    </button>
                </div>
            </div>
            
            <div class="tip-box">
                <h4>💡 Pro Tip</h4>
                <p>Start with our website analyzer to automatically generate test scenarios based on your site's structure!</p>
            </div>
        </div>

        <!-- Analyze Website Section -->
        <div id="analyze" class="tutorial-section">
            <h2>🔍 Website Analysis</h2>
            <p>Let us analyze your website and suggest relevant test scenarios.</p>

            <form id="analyzeForm">
                <div class="form-group">
                    <label for="analyze_url">Website URL:</label>
                    <input type="url" id="analyze_url" name="url" required 
                           placeholder="https://www.example.com">
                    <div class="tip">Include http:// or https:// in the URL</div>
                </div>
                <button type="submit">🔎 Analyze Website</button>
            </form>

            <div id="analyzing" style="display: none;">
                <p>🔄 Analyzing website structure... Please wait...</p>
            </div>

            <div id="analysis-results" class="analysis-result" style="display: none;">
                <h3>Analysis Results</h3>
                <div class="structure-info"></div>
                <div id="suggested-scenarios">
                    <h4>📋 Suggested Test Scenarios</h4>
                    <div class="suggestions-container"></div>
                </div>
            </div>
        </div>

        <!-- Other sections -->
        <div id="scraping" class="tutorial-section">
            <!-- Scraping content -->
        </div>

        <div id="dynamic-content" class="tutorial-section">
            <!-- Dynamic content -->
        </div>

        <div id="troubleshooting" class="tutorial-section">
            <!-- Help content -->
        </div>

        <div id="test-runner" class="tutorial-section">
            <h2>🚀 Run Your Tests</h2>
            
            <form id="testForm">
                <div class="form-group">
                    <label for="url">Website URL:</label>
                    <input type="url" id="url" name="url" required 
                           placeholder="https://www.example.com">
                    <div class="tip">Include http:// or https:// in the URL</div>
                </div>
                <div class="form-group">
                    <label for="test_steps">Test Steps:</label>
                    <textarea id="test_steps" name="test_steps" required 
                             placeholder="Enter your test steps here...&#10;Example:&#10;wait for 2 seconds&#10;click on search button"></textarea>
                    <div class="tip">Start with a wait step!</div>
                </div>
                <button type="submit">▶️ Run Tests</button>
            </form>

            <div id="loading" style="display: none;">
                🔄 Running tests... Please wait...
            </div>

            <div id="results" class="results" style="display: none;">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Navigation function
        function showSection(sectionId, button) {
            // Hide all sections
            document.querySelectorAll('.tutorial-section').forEach(section => {
                section.classList.remove('active');
            });

            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected section and activate button
            document.getElementById(sectionId)?.classList.add('active');
            button?.classList.add('active');
        }

        // Initialize first section
        document.addEventListener('DOMContentLoaded', () => {
            showSection('getting-started', document.querySelector('.nav-item'));
        });
    </script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>