services:
  - type: web
    name: automation-testing
    runtime: python
    pythonVersion: 3.11.0
    buildCommand: |
      apt-get update && apt-get install -y chromium chromium-driver python3-opencv
      python -m pip install --upgrade pip
      python -m pip install -v --no-cache-dir -r requirements.txt
    startCommand: |
      export PYTHONPATH="/opt/render/project/src:${PYTHONPATH:-}"
      python -m pip install -v -r requirements.txt
      FLASK_ENV=production PORT=5000 PYTHONUNBUFFERED=1 PYTHONDONTWRITEBYTECODE=1 python -u run_web_interface.py
    port: 5000
    plan: free
    autoDeploy: true
    healthCheckPath: /
    envVars:
      - key: PYTHONUNBUFFERED
        value: "true"
      - key: CHROME_BIN
        value: /usr/bin/chromium
      - key: CHROMEDRIVER_PATH
        value: /usr/bin/chromedriver